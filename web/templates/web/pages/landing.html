{% extends "web/components/base.html" %}

{% load static %}

{% block title %}
    Send
{% endblock %}

{% block content %}

    <!--suppress HtmlUnknownTarget, XmlInvalidId -->
    <div id="landing-page" class="triangle-content">
            <div class="container">
        <div class="row">
            <div class="col s12">
                <h2 class="center">Joyful Payments</h2>
            </div>
        </div>

        <form id="send-form" action="/send-tokens" novalidate autocomplete="off" method="post">
            <div class="row">
                <div class="col s12 m8 offset-m2">

                    {% csrf_token %}

                    {{ form.non_field_errors }}

                    {% if user.is_authenticated %}
                        {# ################################################################# #}
                        {# ###### Show sender email for authenticated users ###### #}
                        {# ################################################################# #}
                        {{ form.sender_mail.as_hidden }}

                    {% else %}
                        {# ################################################################# #}
                        {# ###### Show sender email depending for public users ###### #}
                        {# ################################################################# #}
                        <div class="row">
                            <div class="col s12">
                                <div class="input-field">
                                    <label for="{{ form.sender_mail.id_for_label }}">Senders mail</label>
                                    {{ form.sender_mail }}
                                    {{ form.sender_mail.errors }}
                                </div>
                            </div>
                        </div>
                    {% endif %}

                    <div class="row">
                        <div class="col s12">
                            <div class="input-field">
                                <label for="{{ form.receiver_mail.id_for_label }}">Receivers mail</label>
                                {{ form.receiver_mail }}
                                {{ form.receiver_mail.errors }}
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col s6">
                            <div class="input-field">
                                <label for="{{ form.amount.id_for_label }}">Amount (XLM)</label>
                                {{ form.amount }}
                                {{ form.amount.errors }}
                            </div>
                        </div>
                        <div class="col s1">
                            <i class="fa fa-long-arrow-right fa-lg exchange" aria-hidden="true"></i>
                        </div>
                        <div class="col s5">
                            <div class="input-field fiat-amount">
                                <input type="text" value="0 USD" name="fiat-amount" id="fiat_amount" min="0.000001"
                                       step="any" required="" readonly>
                            </div>
                        </div>
                    </div>
                    {#  Message field is hidden for now, due to simplicity reasons #}
                    {{ form.message.as_hidden }}
                    {#                    <div class="row">#}
                    {#                        <div class="col s12">#}
                    {#                            <div class="input-field">#}
                    {#                                <label for="{{ form.message.id_for_label }}">Message (optional)</label>#}
                    {#                                {{ form.message }}#}
                    {#                                {{ form.message.errors }}#}
                    {#                            </div>#}
                    {#                        </div>#}
                    {#                    </div>#}
                    <div class="row">
                        <div class="col s12 center">
                            <button class="btn btn-large btn-flat waves-effect waves-dark white-text"
                                    id="send-tokens"
                                    type="submit">Send
                            </button>
                        </div>
                    </div>
                    <div class="row">
                             <div class="col s12">
                            {% include 'web/components/message_box.html' %}
                        </div>
                    </div>
                </div>
            </div>
        </form>
        </div>
    </div>
{% endblock %}


{% block custom_scripts %}
    <script>

        $(document).ready(function () {
            window.bundle.initPriceConversion();
            $('.button-collapse').sideNav({
                menuWidth: '300px',
                closeOnClick: true,
                draggable: true,
                edge: 'right',
            });
        });

    </script>
{% endblock %}